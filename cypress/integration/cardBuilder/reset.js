import s from './selectors'

describe('Card Builder â€” Reset', () => {
  before(() => {
    cy.visit('/card')
  })

  it('should reset all info', () => {
    cy.get(s.NAME_INPUT)
      .type('Kitty Sparkles')
      .get(s.MOVEMENT_INPUT)
      .type('2')
      .get(s.STRENGTH_INPUT)
      .type('2/4/5/6/8')
      .get(s.MANA_INPUT)
      .type('4')
      .get(s.RARITY_SELECT)
      .select('epic')
      .get(s.UNIT_TYPES_INPUT)
      .type('rodent{enter}', { force: true })
      .get(s.FACTION_SELECT)
      .select('ironclad')
      .get(s.IMAGE_INPUT)
      .type('https://i.imgur.com/nLtdfAg.png', { delay: 0 })

      .url()
      .should('not.match', /\/card$/)

      .get(s.RESET_BTN)
      .click()
      .get(s.RESET_CONFIRM_BTN)
      .click()

      .get(s.NAME_INPUT)
      .should('be.empty')
      .get(s.MOVEMENT_INPUT)
      .should('be.empty')
      .get(s.STRENGTH_INPUT)
      .should('be.empty')
      .get(s.MANA_INPUT)
      .should('be.empty')
      .get(s.RARITY_SELECT)
      .should('have.value', 'common')
      .get(s.UNIT_TYPES_SELECT)
      .find('.UnitTypeSelect__multi-value')
      .should('not.exist')
      .get(s.FACTION_SELECT)
      .should('have.value', 'neutral')
      .get(s.IMAGE_INPUT)
      .should('be.empty')
  })
})
